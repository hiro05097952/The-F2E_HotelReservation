webpackJsonp([1],{JCDX:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("//Fk"),r=n.n(o),a=n("7+uW"),i=n("/ocq"),s={name:"preview",data:function(){return{menuName:"Deluxe Double Room",menuKey:0,loading:!1}},methods:{changeInfoPage:function(t){this.$store.commit("enterInfo",t),this.$router.push("information")}},computed:{getRooms:function(){if(this.$store.state.allRooms)return this.$store.state.allRooms.items},getPreImg:function(){if(this.$store.state.preImgArr)return this.$store.state.preImgArr}},filters:{roomNumberDis:function(t){return"0"+String(t+1)}},created:function(){var t=this.$loading.show();setTimeout(function(){t.hide()},1e3)}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("transition-group",{attrs:{name:"roomImg"}},t._l(t.getPreImg,function(e){return n("img",{directives:[{name:"show",rawName:"v-show",value:e.name===t.menuName,expression:"item.name === menuName"}],key:e.name,attrs:{src:e.imageUrl,alt:""}})}),0),t._v(" "),n("div",{staticClass:"logo"}),t._v(" "),n("div",{staticClass:"roomTitle"},[n("h2",[t._v(t._s(t._f("roomNumberDis")(t.menuKey)))]),t._v(" "),n("h3",[t._v(t._s(t.menuName))])]),t._v(" "),n("div",{staticClass:"right"},[n("ul",{staticClass:"navbar"},t._l(t.getRooms,function(e,o){return n("li",{key:o,on:{mouseenter:function(){t.menuName=e.name,t.menuKey=o}}},[n("a",{attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.changeInfoPage(e.name)}}},[t._v(t._s(e.name))])])}),0),t._v(" "),t._m(0)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("ul",{staticClass:"footer"},[e("li",{staticClass:"share"},[e("a",{attrs:{id:"fbIcon",href:"#"}}),this._v(" "),e("a",{attrs:{id:"igIcon",href:"#"}})]),this._v(" "),e("li",{staticClass:"phone"},[e("i",{attrs:{id:"phoneIcon"}}),this._v("\n        02-17264937\n      ")]),this._v(" "),e("li",{staticClass:"email"},[e("i",{attrs:{id:"emailIcon"}}),this._v("\n        whitespace@whitespace.com.tw\n      ")]),this._v(" "),e("li",{staticClass:"address"},[e("i",{attrs:{id:"addressIcon"}}),this._v("\n        台北市羅斯福路十段30號\n      ")])])}]};var u=n("VU/8")(s,c,!1,function(t){n("v0vX")},"data-v-43bd6256",null).exports,l=n("ct5X"),m={name:"information",data:function(){return{messages:{"day-names":["日","一","二","三","四","五","六"],"month-names":["1","2","3","4","5","6","7","8","9","10","11","12"],night:"Night",nights:"Nights"}}},components:{HotelDatePicker:n.n(l).a},mounted:function(){var t=this.$loading.show();setTimeout(function(){t.hide()},1e3)},computed:{getOb:function(){if(this.$store.getters.infoOb)return this.$store.getters.infoOb.room[0]},tomorrow:function(){var t=new Date;return new Date(t.getTime()+864e5)},endDate:function(){var t=new Date;return new Date(t.getTime()+7776e6)},getBooking:function(){if(this.$store.getters.infoOb){for(var t=[],e=0;e<this.$store.getters.infoOb.booking.length;e++)t.push(this.$store.getters.infoOb.booking[e].date);return t}}},filters:{bed:function(t){if(1===t.length)switch(t[0]){case"Single":return"單人床";case"Small Double":return"小雙人床";case"Double":return"雙人床";case"Queen":return"加大雙人床"}else switch(t[1]){case"Double":return"單人床x2";case"Queen":return"雙人床x2"}}},methods:{clearAPI:function(){this.axios.delete("https://challenge.thef2e.com/api/thef2e2019/stage6/rooms",this.$store.state.config).then(function(t){alert("已清除！"),console.log(t)}).catch(function(t){console.log(t)})},reservation:function(){if(console.log(this.$children[0]),!this.$children[0].checkIn||!this.$children[0].checkOut)return alert("請填寫正確日期"),!1;for(var t=new Date(this.$children[0].checkIn),e=this.converter(t),n=new Date(this.$children[0].checkOut),o=this.converter(n),r=(n-t)/864e5,a=[],i=0,s=0,c=0;c<r;c++)a.push(this.converter(t.getTime()+864e5*c)),"holiday"===this.checkholiday(t.getTime()+864e5*c)?i+=1:s+=1;var u=this.getOb.normalDayPrice*s+this.getOb.holidayPrice*i;this.$store.commit("putCheckDate",{checkIn:e,checkOut:o,nightArr:a,holiday:i,weekday:s,total:u}),this.$router.push("information/validate")},converter:function(t){var e=new Date(t),n=e.getMonth()+1<10?"0"+String(e.getMonth()+1):e.getMonth()+1,o=e.getDate()<10?"0"+String(e.getDate()):e.getDate();return e.getFullYear()+"-"+n+"-"+o},checkholiday:function(t){var e=new Date(t);return 0===e.getDay()||6===e.getDay()?"holiday":"weekday"}}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.getOb?n("div",{attrs:{id:"app"}},[n("div",{staticClass:"imgWrap",on:{click:function(e){return e.preventDefault(),t.$router.push("/information/imgbox")}}},[n("a",{staticClass:"logo",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$router.push("preview")}}}),t._v(" "),t._l(t.getOb.imageUrl,function(t,e){return n("img",{key:e,attrs:{src:t}})})],2),t._v(" "),n("ul",{staticClass:"infoL"},[n("li",{staticClass:"title"},[t._v(t._s(t.getOb.name))]),t._v(" "),n("li",[t._v("房間人數限制："+t._s(t.getOb.descriptionShort.GuestMin)+"~"+t._s(t.getOb.descriptionShort.GuestMax)+" 人")]),t._v(" "),n("li",[t._v("床型："+t._s(t._f("bed")(t.getOb.descriptionShort.Bed)))]),t._v(" "),n("li",[t._v("衛浴數量："+t._s(t.getOb.descriptionShort["Private-Bath"])+" 間")]),t._v(" "),n("li",[t._v("房間大小:"+t._s(t.getOb.descriptionShort.Footage)+" 平方公尺")]),t._v(" "),n("li",{staticClass:"desc"},[t._v(t._s(t.getOb.description))]),t._v(" "),n("li",{staticClass:"br"},[t._v("﹨﹨﹨")]),t._v(" "),n("li",{staticClass:"checkin"},[n("h4",[t._v("Check in")]),t._v("\n      "+t._s(t.getOb.checkInAndOut.checkInEarly)+" － "+t._s(t.getOb.checkInAndOut.checkInLate)+"\n    ")]),t._v(" "),n("li",{staticClass:"checkout"},[n("h4",[t._v("Check Out")]),t._v("\n      "+t._s(t.getOb.checkInAndOut.checkOut)+"\n    ")])]),t._v(" "),n("ul",{staticClass:"infoR"},[n("li",[t._v("NT."+t._s(t.getOb.normalDayPrice))]),t._v(" "),n("li",[t._v("平日(一~四)")]),t._v(" "),n("li",[t._v("NT."+t._s(t.getOb.holidayPrice))]),t._v(" "),n("li",[t._v("假日(五~日)")])]),t._v(" "),n("table",{staticClass:"iconWrap"},[n("tr",[n("td",{class:{no:!t.getOb.amenities["Wi-Fi"]}},[n("i",{attrs:{id:"wifiIcon"}}),t._v("Wi-Fi")]),t._v(" "),n("td",{class:{no:!t.getOb.amenities.Television}},[n("i",{attrs:{id:"phoneIcon"}}),t._v("電話")]),t._v(" "),n("td",{class:{no:!t.getOb.amenities["Great-View"]}},[n("i",{attrs:{id:"viewIcon"}}),t._v("漂亮的視野")])]),t._v(" "),n("tr",[n("td",{class:{no:!t.getOb.amenities.Breakfast}},[n("i",{attrs:{id:"breakIcon"}}),t._v("早餐")]),t._v(" "),n("td",{class:{no:!t.getOb.amenities["Air-Conditioner"]}},[n("i",{attrs:{id:"airconIcon"}}),t._v("空調")]),t._v(" "),n("td",{class:{no:t.getOb.amenities["Smoke-Free"]}},[n("i",{attrs:{id:"smokeIcon"}}),t._v("禁止吸煙")])]),t._v(" "),n("tr",[n("td",{class:{no:!t.getOb.amenities["Mini-Bar"]}},[n("i",{attrs:{id:"minibarIcon"}}),t._v("Mini Bar")]),t._v(" "),n("td",{class:{no:!t.getOb.amenities.Refrigerator}},[n("i",{attrs:{id:"refIcon"}}),t._v("冰箱")]),t._v(" "),n("td",{class:{no:!t.getOb.amenities["Child-Friendly"]}},[n("i",{attrs:{id:"childIcon"}}),t._v("適合兒童")])]),t._v(" "),n("tr",[n("td",{class:{no:!t.getOb.amenities["Room-Service"]}},[n("i",{attrs:{id:"serviceIcon"}}),t._v("Room Service")]),t._v(" "),n("td",{class:{no:!t.getOb.amenities.Sofa}},[n("i",{attrs:{id:"sofaIcon"}}),t._v("沙發")]),t._v(" "),n("td",{class:{no:!t.getOb.amenities["Pet-Friendly"]}},[n("i",{attrs:{id:"petIcon"}}),t._v("寵物攜帶")])])]),t._v(" "),n("div",{staticClass:"calendar"},[n("HotelDatePicker",{attrs:{format:"DD/MM/YYYY",i18n:t.messages,maxNights:10,startDate:t.tomorrow,endDate:t.endDate,disabledDates:t.getBooking,enableCheckout:!0}})],1),t._v(" "),n("button",{on:{click:function(e){return e.preventDefault(),t.reservation(e)}}},[t._v("預約時段")]),t._v(" "),n("button",{staticClass:"clearbtn",on:{click:function(e){return e.preventDefault(),t.clearAPI(e)}}},[t._v("清除API")]),t._v(" "),n("router-view")],1):t._e()},staticRenderFns:[]};var v=n("VU/8")(m,h,!1,function(t){n("ps7o")},"data-v-5b7ce0ea",null).exports,f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.getImg?n("div",{staticClass:"imgbox",on:{touchmove:function(t){t.preventDefault()},mousewheel:function(t){t.preventDefault()},click:function(e){return e.target!==e.currentTarget?null:t.goback(e)}}},[n("i",{staticClass:"arrowL",on:{click:function(e){return t.changeImg(-1)}}},[t._v("<")]),t._v(" "),n("transition-group",{attrs:{name:"fade"}},t._l(t.getImg.imageUrl,function(e,o){return n("img",{directives:[{name:"show",rawName:"v-show",value:o===t.nowImg,expression:"index === nowImg"}],key:e,attrs:{src:e}})}),0),t._v(" "),n("i",{staticClass:"arrowR",on:{click:function(e){return t.changeImg(1)}}},[t._v(">")]),t._v(" "),n("h3",[t._v(t._s(t.getImg.name))]),t._v(" "),n("p",{staticClass:"page"},[t._v(t._s(t.nowImg+1)+" / "+t._s(t.getImg.imageUrl.length))])],1):t._e()},staticRenderFns:[]};var g=n("VU/8")({name:"imgbox",data:function(){return{nowImg:0}},computed:{getImg:function(){if(this.$store.getters.infoOb)return this.$store.getters.infoOb.room[0]}},methods:{changeImg:function(t){2===this.nowImg&&1===t?this.nowImg=0:0===this.nowImg&&-1===t?this.nowImg=2:this.nowImg+=t},goback:function(){this.$router.back()}}},f,!1,function(t){n("dM4N")},"data-v-39da55d2",null).exports,d={name:"validate",data:function(){return{customerData:{name:"",tel:""}}},methods:{goback:function(){this.$router.back()},booking:function(){var t=this;if(this.customerData.name&&this.customerData.tel){var e={name:this.customerData.name,tel:this.customerData.tel,date:this.$store.state.reservation.nightArr};this.axios.post("https://challenge.thef2e.com/api/thef2e2019/stage6/room/"+this.$store.getters.infoOb.room[0].id,e,this.$store.state.config).then(function(e){t.$router.push("/information/success")}).catch(function(e){console.log(e),t.$router.push("/information/error")})}else alert("請輸入正確")}}},_={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"validateBox",on:{touchmove:function(t){t.preventDefault()},mousewheel:function(t){t.preventDefault()}}},[n("form",{attrs:{action:""}},[n("h2",[t._v("預約時段")]),t._v(" "),n("p",[t._v("﹨﹨﹨")]),t._v(" "),n("label",{staticClass:"name"},[n("p",[t._v("姓名")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.customerData.name,expression:"customerData.name"}],attrs:{type:"text"},domProps:{value:t.customerData.name},on:{input:function(e){e.target.composing||t.$set(t.customerData,"name",e.target.value)}}})]),t._v(" "),n("label",{staticClass:"phone"},[n("p",[t._v("電話")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.customerData.tel,expression:"customerData.tel"}],attrs:{type:"text"},domProps:{value:t.customerData.tel},on:{input:function(e){e.target.composing||t.$set(t.customerData,"tel",e.target.value)}}})]),t._v(" "),n("label",{staticClass:"checkInOut"},[n("p",[t._v("預約起迄")]),t._v(" "),n("input",{attrs:{type:"text",readonly:""},domProps:{value:this.$store.state.reservation.checkIn}}),t._v("\n      ~\n      "),n("input",{attrs:{type:"text",readonly:""},domProps:{value:this.$store.state.reservation.checkOut}})]),t._v(" "),n("ul",{staticClass:"receipt"},[0!==this.$store.state.reservation.weekday?n("li",[t._v("\n        平日時段\n        "),n("span",[t._v(t._s(this.$store.state.reservation.weekday)+"夜")])]):t._e(),t._v(" "),0!==this.$store.state.reservation.holiday?n("li",[t._v("\n        假日時段\n        "),n("span",[t._v(t._s(this.$store.state.reservation.holiday)+"夜")])]):t._e()]),t._v(" "),n("h3",{staticClass:"total"},[t._v("= NT."+t._s(this.$store.state.reservation.total))]),t._v(" "),n("button",{staticClass:"reset",on:{click:function(e){return e.preventDefault(),t.goback(e)}}},[t._v("取消")]),t._v(" "),n("button",{on:{click:function(e){return e.preventDefault(),t.booking(e)}}},[t._v("確定預約")])])])},staticRenderFns:[]};var p=n("VU/8")(d,_,!1,function(t){n("s2Hp")},"data-v-e5014172",null).exports,b={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"success",on:{touchmove:function(t){t.preventDefault()},mousewheel:function(t){t.preventDefault()}}},[n("div",{staticClass:"wrap"},[n("h2",[t._v("預約成功")]),t._v(" "),n("p",[t._v("﹨﹨﹨")]),t._v(" "),n("i"),t._v(" "),n("button",{on:{click:function(e){return e.preventDefault(),t.goInfo(e)}}},[t._v("回頁面")])])])},staticRenderFns:[]};var k=n("VU/8")({name:"success",data:function(){return{}},methods:{goInfo:function(){this.$router.push("/information")}}},b,!1,function(t){n("JCDX")},"data-v-02a63358",null).exports,D={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"error",on:{touchmove:function(t){t.preventDefault()},mousewheel:function(t){t.preventDefault()}}},[n("div",{staticClass:"wrap"},[n("h2",[t._v("預約失敗")]),t._v(" "),n("p",[t._v("﹨﹨﹨")]),t._v(" "),n("h4",[t._v("預約時間已被人預訂")]),t._v(" "),n("button",{on:{click:function(e){return e.preventDefault(),t.goInfo(e)}}},[t._v("返回")])])])},staticRenderFns:[]};var I=n("VU/8")({name:"error",data:function(){return{}},methods:{goInfo:function(){this.$router.push("/information")}}},D,!1,function(t){n("TQV9")},"data-v-4953540d",null).exports;a.a.use(i.a);var w=new i.a({routes:[{path:"*",redirect:u},{path:"/",name:"preview",component:u},{path:"/information",name:"information",component:v,children:[{path:"/information/imgbox",name:"imgbox",component:g},{path:"/information/validate",name:"validate",component:p},{path:"/information/success",name:"success",component:k},{path:"/information/error",name:"error",component:I}]}]}),O=n("mtWM"),$=n.n(O),C=n("Rf8U"),y=n.n(C),A=n("NYxO"),R=n("ZZvs"),x=n.n(R),P=(n("SYh3"),{render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]});var N=n("VU/8")({name:"App"},P,!1,function(t){n("mudL")},null,null).exports;a.a.config.productionTip=!1,a.a.use(y.a,$.a),a.a.use(A.a),a.a.use(x.a,{height:80,width:80});var S=new A.a.Store({state:{allRooms:{},roomsArr:[],infoPage:"Single Room",preImgArr:[],config:{headers:{Authorization:"Bearer o1UGgT6xKbsPCeVMY8paFJfCpNH3I6V1RyLgDpJvYn9CODijNUADOBXwys",accept:"application/json"}},reservation:{checkIn:"",checkOut:"",nightArr:[],holiday:0,weekday:0,total:0}},mutations:{putAllRooms:function(t,e){t.allRooms=e},putRooms:function(t,e){t.roomsArr=e},enterInfo:function(t,e){t.infoPage=e},putPreImg:function(t){for(var e=0;e<t.roomsArr.length;e++)switch(t.roomsArr[e].room[0].name){case"Single Room":case"Deluxe Single Room":t.preImgArr.push({imageUrl:t.roomsArr[e].room[0].imageUrl[2],name:t.roomsArr[e].room[0].name});break;case"Double Room":case"Deluxe Double Room":t.preImgArr.push({imageUrl:t.roomsArr[e].room[0].imageUrl[1],name:t.roomsArr[e].room[0].name});break;case"Twin Room":case"Deluxe Twin Room":t.preImgArr.push({imageUrl:t.roomsArr[e].room[0].imageUrl[0],name:t.roomsArr[e].room[0].name})}},putCheckDate:function(t,e){t.reservation.checkIn=e.checkIn,t.reservation.checkOut=e.checkOut,t.reservation.nightArr=e.nightArr,t.reservation.holiday=e.holiday,t.reservation.weekday=e.weekday,t.reservation.total=e.total}},getters:{infoOb:function(t){if(0!==t.roomsArr.length)return t.roomsArr.filter(function(e){return t.infoPage===e.room[0].name})[0]}},actions:{getAPI:function(t){var e=t.commit,n=t.state;new r.a(function(t){$.a.get("https://challenge.thef2e.com/api/thef2e2019/stage6/rooms",n.config).then(function(n){e("putAllRooms",n.data),t()})}).then(function(){for(var t=[],o=0;o<n.allRooms.items.length;o++)$.a.get("https://challenge.thef2e.com/api/thef2e2019/stage6/room/"+n.allRooms.items[o].id,n.config).then(function(o){t.push(o.data),t.length===n.allRooms.items.length&&(t.sort(function(t,e){return t.room[0].holidayPrice-e.room[0].holidayPrice}),e("putRooms",t),e("putPreImg"))})})}}});w.beforeEach(function(t,e,n){"success"!==t.name&&"error"!==t.name||"validate"===e.name||w.push("preview"),n()}),new a.a({el:"#app",router:w,store:S,components:{App:N},template:"<App/>",created:function(){this.$store.dispatch("getAPI")}})},SYh3:function(t,e){},TQV9:function(t,e){},dM4N:function(t,e){},mudL:function(t,e){},ps7o:function(t,e){},s2Hp:function(t,e){},v0vX:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.990c6e972e3ccdc9219e.js.map